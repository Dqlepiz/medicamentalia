(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.BaseGraph=function(){function e(e,n){return this.onResize=t(this.onResize,this),this.setupMarkerLabel=t(this.setupMarkerLabel,this),this.setupMarkerLine=t(this.setupMarkerLine,this),this.id=e,this.options=$.extend(!0,i,n),this.$el=$("#"+this.id),this.getDimensions(),this.setSVG(),this.setScales(),this.markers=[],this}var n,i;return i={margin:{top:0,right:0,bottom:20,left:0},aspectRatio:.5625,label:!1,key:{id:"key",x:"key",y:"value"}},n={value:null,label:"",orientation:"horizontal",align:"right"},e.prototype.setSVG=function(){return this.svg=d3.select("#"+this.id).append("svg").attr("width",this.containerWidth).attr("height",this.containerHeight),this.container=this.svg.append("g").attr("transform","translate("+this.options.margin.left+","+this.options.margin.top+")")},e.prototype.loadData=function(t){return d3.csv(t,function(t){return function(e,n){return t.setData(n)}}(this)),this},e.prototype.setData=function(t){return this.data=this.dataParser(t),this.drawScales(),this.drawMarkers(),this.drawGraph(),this},e.prototype.dataParser=function(t){return t},e.prototype.setGraph=function(){return this},e.prototype.setScales=function(){return this},e.prototype.drawScales=function(){return this.x.domain(this.getScaleXDomain()),this.y.domain(this.getScaleYDomain()),this.xAxis&&this.container.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.yAxis&&this.container.append("g").attr("class","y axis").attr("transform","translate("+this.width+" ,0)").call(this.yAxis),this},e.prototype.getScaleXRange=function(){return[0,this.width]},e.prototype.getScaleYRange=function(){return[this.height,0]},e.prototype.getScaleXDomain=function(){return[]},e.prototype.getScaleYDomain=function(){return[]},e.prototype.addMarker=function(t){return this.markers.push($.extend({},n,t)),this},e.prototype.drawMarkers=function(){return this.container.selectAll(".marker").data(this.markers).enter().append("line").attr("class","marker").call(this.setupMarkerLine),this.container.selectAll(".marker-label").data(this.markers).enter().append("text").attr("class","marker-label").attr("text-anchor",function(t){return"vertical"===t.orientation?"middle":"right"===t.align?"end":"start"}).text(function(t){return t.label}).call(this.setupMarkerLabel)},e.prototype.setupMarkerLine=function(t){return t.attr("x1",function(t){return function(e){return"horizontal"===e.orientation?0:t.x(e.value)}}(this)).attr("y1",function(t){return function(e){return"horizontal"===e.orientation?t.y(e.value):0}}(this)).attr("x2",function(t){return function(e){return"horizontal"===e.orientation?t.width:t.x(e.value)}}(this)).attr("y2",function(t){return function(e){return"horizontal"===e.orientation?t.y(e.value):t.height}}(this))},e.prototype.setupMarkerLabel=function(t){return t.attr("x",function(t){return function(e){return"horizontal"===e.orientation?"right"===e.align?t.width:0:t.x(e.value)}}(this)).attr("y",function(t){return function(e){return"horizontal"===e.orientation?t.y(e.value):t.height}}(this))},e.prototype.onResize=function(){return this.getDimensions(),this.updateGraphDimensions(),this},e.prototype.getDimensions=function(){return this.$el&&(this.containerWidth=this.$el.width(),this.containerHeight=this.containerWidth*this.options.aspectRatio,this.width=this.containerWidth-this.options.margin.left-this.options.margin.right,this.height=this.containerHeight-this.options.margin.top-this.options.margin.bottom),this},e.prototype.updateGraphDimensions=function(){return this.svg.attr("width",this.containerWidth).attr("height",this.containerHeight),this.x.range(this.getScaleXRange()),this.y.range(this.getScaleYRange()),this.xAxis&&this.container.selectAll(".x.axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.yAxis&&this.container.selectAll(".y.axis").attr("transform","translate("+this.width+" ,0)").call(this.yAxis),this.container.select(".marker").call(this.setupMarkerLine),this.container.select(".marker-label").call(this.setupMarkerLabel),this},e}()}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;window.BarGraph=function(n){function i(e,n){return this.setBarLabelYDimensions=t(this.setBarLabelYDimensions,this),this.setBarLabelXDimensions=t(this.setBarLabelXDimensions,this),this.setBarDimensions=t(this.setBarDimensions,this),this.getScaleYDomain=t(this.getScaleYDomain,this),this.getScaleXDomain=t(this.getScaleXDomain,this),i.__super__.constructor.call(this,e,n),this}return e(i,n),i.prototype.dataParser=function(t){return t.forEach(function(t){return function(t){return t.value=+t.value}}(this)),t},i.prototype.setScales=function(){return this.x=d3.scaleBand().range(this.getScaleXRange()).paddingInner(.1).paddingOuter(0),this.y=d3.scaleLinear().range(this.getScaleYRange()),this},i.prototype.getScaleXDomain=function(){return this.data.map(function(t){return function(e){return e[t.options.key.x]}}(this))},i.prototype.getScaleYDomain=function(){return[0,d3.max(this.data,function(t){return function(e){return e[t.options.key.y]}}(this))]},i.prototype.drawGraph=function(){return this.container.selectAll(".bar").data(this.data).enter().append("rect").attr("class",function(t){return t.active?"bar active":"bar"}).attr("id",function(t){return function(e){return e[t.options.key.id]}}(this)).call(this.setBarDimensions),this.options.label&&(this.container.selectAll(".bar-label-x").data(this.data).enter().append("text").attr("class",function(t){return t.active?"bar-label-x active":"bar-label-x"}).attr("id",function(t){return function(e){return"bar-label-x-"+e[t.options.key.id]}}(this)).attr("dy","1.5em").attr("text-anchor","middle").text(function(t){return function(e){return e[t.options.key.x]}}(this)).call(this.setBarLabelXDimensions),this.container.selectAll(".bar-label-y").data(this.data).enter().append("text").attr("class",function(t){return t.active?"bar-label-y active":"bar-label-y"}).attr("id",function(t){return function(e){return"bar-label-y-"+e[t.options.key.id]}}(this)).attr("dy","-0.5em").attr("text-anchor","middle").text(function(t){return function(e){return e[t.options.key.y]}}(this)).call(this.setBarLabelYDimensions)),this},i.prototype.updateGraphDimensions=function(){return i.__super__.updateGraphDimensions.call(this),this.container.selectAll(".bar").call(this.setBarDimensions),this.container.selectAll(".bar-label-x").call(this.setBarLabelXDimensions),this.container.selectAll(".bar-label-y").call(this.setBarLabelYDimensions),this},i.prototype.setBarDimensions=function(t){return t.attr("x",function(t){return function(e){return t.x(e[t.options.key.x])}}(this)).attr("y",function(t){return function(e){return t.y(e[t.options.key.y])}}(this)).attr("height",function(t){return function(e){return t.height-t.y(e[t.options.key.y])}}(this)).attr("width",this.x.bandwidth())},i.prototype.setBarLabelXDimensions=function(t){return t.attr("x",function(t){return function(e){return t.x(e[t.options.key.x])+.5*t.x.bandwidth()}}(this)).attr("y",function(t){return function(e){return t.height}}(this))},i.prototype.setBarLabelYDimensions=function(t){return t.attr("x",function(t){return function(e){return t.x(e[t.options.key.x])+.5*t.x.bandwidth()}}(this)).attr("y",function(t){return function(e){return t.y(e[t.options.key.y])}}(this))},i}(window.BaseGraph)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;window.LineGraph=function(n){function i(e,n){return this.setLabelDimensions=t(this.setLabelDimensions,this),this.getScaleXDomain=t(this.getScaleXDomain,this),i.__super__.constructor.call(this,e,n),this}return e(i,n),i.prototype.activeLines=[],i.prototype.setData=function(t){return this.years=this.getYears(t),i.__super__.setData.call(this,t),this},i.prototype.getYears=function(t){var e;return e=[],d3.keys(t[0]).forEach(function(t){if(+t)return e.push(+t)}),e.sort()},i.prototype.dataParser=function(t){return t.forEach(function(t){return function(e){return e.values={},t.years.forEach(function(t){return e[t]&&(e.values[t]=+e[t]),delete e[t]})}}(this)),t},i.prototype.setScales=function(){return this.x=d3.scaleLinear().range(this.getScaleXRange()),this.y=d3.scaleLinear().range(this.getScaleYRange()),this.xAxis=d3.axisBottom(this.x).tickFormat(d3.format("")),this.yAxis=d3.axisLeft(this.y).tickSize(this.width),this.line=d3.line().curve(d3.curveCatmullRom).x(function(t){return function(e){return t.x(+e.key)}}(this)).y(function(t){return function(e){return t.y(e.value)}}(this)),this.options.isArea&&(this.area=d3.area().curve(d3.curveCatmullRom).x(function(t){return function(e){return t.x(+e.key)}}(this)).y0(this.height).y1(function(t){return function(e){return t.y(e.value)}}(this))),this},i.prototype.getScaleXDomain=function(){return[this.years[0],this.years[this.years.length-1]]},i.prototype.getScaleYDomain=function(){return[0,d3.max(this.data,function(t){return d3.max(d3.values(t.values))})]},i.prototype.drawGraph=function(){var t;return this.container.select(".graph").remove(),t=this.container.append("g").attr("class","graph"),t.selectAll(".line").data(this.data).enter().append("path").attr("class",function(t){return function(e){return t.activeLines.indexOf(e[t.options.key.x])===-1?"line":"line active"}}(this)).attr("id",function(t){return function(e){return"line-"+e[t.options.key.id]}}(this)).datum(function(t){return d3.entries(t.values)}).attr("d",this.line),this.options.isArea&&t.selectAll(".area").data(this.data).enter().append("path").attr("class",function(t){return function(e){return t.activeLines.indexOf(e[t.options.key.x])===-1?"area":"area active"}}(this)).attr("id",function(t){return function(e){return"area-"+e[t.options.key.id]}}(this)).datum(function(t){return d3.entries(t.values)}).attr("d",this.area),this.options.label&&t.selectAll(".line-label").data(this.data).enter().append("text").attr("class","line-label").attr("id",function(t){return function(e){return"line-label-"+e[t.options.key.id]}}(this)).attr("text-anchor","end").attr("dy","-0.125em").text(function(t){return function(e){return e[t.options.key.x]}}(this)).call(this.setLabelDimensions),this},i.prototype.setLabelDimensions=function(t){return t.attr("x",this.width).attr("y",function(t){return function(e){return t.y(e.values[t.years[t.years.length-1]])}}(this))},i}(window.BaseGraph)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;window.HeatmapGraph=function(n){function i(e,n){return this.getCountryName=t(this.getCountryName,this),this.onMouseOut=t(this.onMouseOut,this),this.onMouseOver=t(this.onMouseOver,this),this.setMarkerDimensions=t(this.setMarkerDimensions,this),this.setCellDimensions=t(this.setCellDimensions,this),this.getScaleYDomain=t(this.getScaleYDomain,this),this.getScaleXDomain=t(this.getScaleXDomain,this),this.getScaleYRange=t(this.getScaleYRange,this),this.getScaleXRange=t(this.getScaleXRange,this),this.lang=$("body").data("lang"),i.__super__.constructor.call(this,e,n),this}return e(i,n),i.prototype.setSVG=function(){return this.svg=null,this.container=d3.select("#"+this.id+" .heatmap-container"),this.$tooltip=this.$el.find(".tooltip")},i.prototype.setData=function(t){return this.years=this.getYears(t),this.countries=t.map(function(t){return t.code}),this.cellsData=this.getCellsData(t),this.data=this.dataParser(t),this.getDimensions(),this.drawScales(),this.drawMarkers(),this.drawGraph(),this},i.prototype.getYears=function(t){var e,n,i;return n=d3.min(t,function(t){return d3.min(d3.keys(t.values))}),e=d3.max(t,function(t){return d3.max(d3.keys(t.values))}),i=d3.range(n,e,1),i.push(+e),i},i.prototype.getCellsData=function(t){var e;return e=[],t.forEach(function(t){var n,i;n=[];for(i in t.values)n.push(e.push({country:t.code,name:t.name,year:i,cases:t.cases[i],value:t.values[i]}));return n}),e},i.prototype.dataParser=function(t){return t.forEach(function(t){return function(e){return e.values={},t.years.forEach(function(t){return e[t]&&(e.values[t]=+e[t]),delete e[t]})}}(this)),t},i.prototype.setScales=function(){return this.x=d3.scaleBand().padding(0).paddingInner(0).paddingOuter(0).round(!0).range(this.getScaleXRange()),this.y=d3.scaleBand().padding(0).paddingInner(0).paddingOuter(0).round(!0).range(this.getScaleYRange()),this.color=d3.scaleSequential(d3.interpolateOrRd),this},i.prototype.drawScales=function(){return i.__super__.drawScales.call(this),this.color.domain([0,4]),this},i.prototype.getScaleXRange=function(){return[0,this.width]},i.prototype.getScaleYRange=function(){return[0,this.height]},i.prototype.getScaleXDomain=function(){return this.years},i.prototype.getScaleYDomain=function(){return this.countries},i.prototype.getDimensions=function(){var t;return this.width=this.$el.width()-100,this.years&&this.countries&&(t=Math.floor(this.width/this.years.length),this.height=t<20?t*this.countries.length:20*this.countries.length),this},i.prototype.drawGraph=function(){return this.x.range(this.getScaleXRange()),this.y.range(this.getScaleYRange()),this.container.style("height",this.height+"px"),this.container.append("div").attr("class","cell-container").style("height",this.height+"px").selectAll(".cell").data(this.cellsData).enter().append("div").attr("class","cell").style("background",function(t){return function(e){return t.color(e.value)}}(this)).on("mouseover",this.onMouseOver).on("mouseout",this.onMouseOut).call(this.setCellDimensions),this.container.append("div").attr("class","x-axis axis").selectAll(".axis-item").data(this.years.filter(function(t){return t%5===0})).enter().append("div").attr("class","axis-item").style("left",function(t){return function(e){return t.x(e)+"px"}}(this)).html(function(t){return t}),this.container.append("div").attr("class","y-axis axis").selectAll(".axis-item").data(this.countries).enter().append("div").attr("class","axis-item").style("top",function(t){return function(e){return t.y(e)+"px"}}(this)).html(function(t){return function(e){return t.getCountryName(e)}}(this)),this.container.select(".cell-container").selectAll(".marker").data(this.data.map(function(t){return{code:t.code,year:t.year_introduction}}).filter(function(t){return!isNaN(t.year)})).enter().append("div").attr("class","marker").call(this.setMarkerDimensions)},i.prototype.updateGraphDimensions=function(){return this.x.range(this.getScaleXRange()),this.y.range(this.getScaleYRange()),this.container.style("height",this.height+"px"),this.container.select(".cell-container").style("height",this.height+"px"),this.container.selectAll(".cell").call(this.setCellDimensions),this.container.select(".x-axis").selectAll(".axis-item").style("left",function(t){return function(e){return t.x(e)+"px"}}(this)),this.container.select(".y-axis").selectAll(".axis-item").style("top",function(t){return function(e){return t.y(e)+"px"}}(this)),this.container.select(".cell-container").selectAll(".marker").call(this.setMarkerDimensions),this},i.prototype.setCellDimensions=function(t){return t.style("left",function(t){return function(e){return t.x(e.year)+"px"}}(this)).style("top",function(t){return function(e){return t.y(e.country)+"px"}}(this)).style("width",this.x.bandwidth()+"px").style("height",this.y.bandwidth()+"px")},i.prototype.setMarkerDimensions=function(t){return t.style("top",function(t){return function(e){return t.y(e.code)+"px"}}(this)).style("left",function(t){return function(e){return e.year<t.years[0]?t.x(t.years[0])-1+"px":e.year<t.years[t.years.length-1]?t.x(e.year)-1+"px":t.x.bandwidth()+t.x(t.years[t.years.length-1])+"px"}}(this)).style("height",this.y.bandwidth()+"px")},i.prototype.onMouseOver=function(t){var e,n,i;i=$(d3.event.target).offset(),n="es"===this.lang?"casos":"cases",e="es"===this.lang?"caso":"case",this.$tooltip.find(".tooltip-inner .country").html(t.name),this.$tooltip.find(".tooltip-inner .year").html(t.year),this.$tooltip.find(".tooltip-inner .value").html(this.formatDecimal(t.value,this.lang)),this.$tooltip.find(".tooltip-inner .cases").html(1!==t.cases?t.cases.toLocaleString(this.lang)+" "+n:t.cases.toLocaleString(this.lang)+" "+e),this.$tooltip.css({left:i.left+.5*this.x.bandwidth()-.5*this.$tooltip.width(),top:i.top-.5*this.y.bandwidth()-this.$tooltip.height(),opacity:"1"})},i.prototype.onMouseOut=function(t){this.$tooltip.css("opacity","0")},i.prototype.getCountryName=function(t){var e;return e=this.data.filter(function(e){return e.code===t}),e[0]?e[0].name:""},i.prototype.formatDecimal=function(t,e){return t<.001?0:t>=.1?t.toFixed(1).toLocaleString(e):t>=.01?t.toFixed(2).toLocaleString(e):t.toFixed(3).toLocaleString(e)},i}(BaseGraph)}.call(this),function(){!function(t){var e,n,i,r,a,s,o,c,u,l;if(i=t("body").data("lang"),e=t("body").data("baseurl"),t('[data-toggle="tooltip"]').tooltip(),n=function(t,e,n){var i;return i=t.filter(function(t){return t.code===e}),i?i[0]["name_"+n]:void 0},r=function(){var e,n,i,r;for(r=Popcorn.HTMLYouTubeVideoElement("#video-map-polio"),r.src="http://www.youtube.com/embed/l1F2Xd5FFlQ?controls=0&showinfo=0&hd=1",i=Popcorn(r),n=36,e=0;e<=n;)i.footnote({start:1.6222*e,end:1.6222*(e+1),text:1980+e,target:"video-map-polio-description"}),e++;return r.addEventListener("ended",function(e){return t(".video-map-polio-cover").fadeIn(),t("#video-map-polio-description").fadeTo(300,0),i.currentTime(0)}),t("#video-map-polio-play-btn").click(function(e){return e.preventDefault(),i.play(),t(".video-map-polio-cover").fadeOut(),t("#video-map-polio-description").fadeTo(300,1)})},a=function(e,n,i,r){var a;return n=n.filter(function(t){return i.indexOf(t.code)!==-1&&t.disease===r&&d3.values(t.values).length>0}).sort(function(t,e){return t.total-e.total}),a=new window.HeatmapGraph(e,{margin:{right:0,left:0}}),a.setData(n),t(window).resize(a.onResize)},u=function(){return d3.queue().defer(d3.csv,e+"/assets/data/diseases-cases.csv").defer(d3.csv,e+"/assets/data/population.csv").await(function(t,e,n){return delete e.columns,e.forEach(function(t){var e,i,r;if(t.disease=t.disease.toLowerCase(),t.year_introduction&&(t.year_introduction=+t.year_introduction.replace("prior to","")),t.cases={},t.values={},i=n.filter(function(e){return e.code===t.code}),i.length>0)for(r=1980;r<2016;)t[r]&&(e=+i[0][r],0!==e&&(t.cases[r]=+t[r],t.values[r]=1e3*+t[r]/e)),delete t[r],r++;return t.total=d3.values(t.values).reduce(function(t,e){return t+e},0)}),a("vaccines-measles-graph-1",e,["FIN","HUN","PRT","URY","MEX","COL"],"measles"),a("vaccines-measles-graph-2",e,["IRQ","BGR","MNG","ZAF","FRA","GEO"],"measles")})},s=function(){var n;return n=new window.LineGraph("immunization-coverage-graph-all",{key:{id:"code",x:"name"},label:!0,margin:{top:20}}),n.getScaleYDomain=function(t){return[0,100]},n.yAxis.tickValues([0,25,50,75,100]),d3.csv(e+"/assets/data/immunization-coverage.csv",function(e,i){return n.setData(i.filter(function(e){return e.vaccine===t("#immunization-coverage-vaccine-selector").val()})),t("#immunization-coverage-vaccine-selector").change(function(e){return n.setData(i.filter(function(e){return e.vaccine===t("#immunization-coverage-vaccine-selector").val()})),t("#immunization-coverage-country-1-selector").trigger("change")}),t("#immunization-coverage-country-1-selector, #immunization-coverage-country-2-selector").change(function(e){return t("#immunization-coverage-graph-all").find(".line-label, .line").removeClass("active"),t("#immunization-coverage-graph-all #line-"+t("#immunization-coverage-country-1-selector").val()).addClass("active"),t("#immunization-coverage-graph-all #line-"+t("#immunization-coverage-country-2-selector").val()).addClass("active"),t("#immunization-coverage-graph-all #line-label-"+t("#immunization-coverage-country-1-selector").val()).addClass("active"),t("#immunization-coverage-graph-all #line-label-"+t("#immunization-coverage-country-2-selector").val()).addClass("active")}),t("#immunization-coverage-country-1-selector").trigger("change")}),t(window).resize(n.onResize)},o=function(){var n,i;return n=["FRA","DNK","DZA","LKA"],i=new window.LineGraph("immunization-coverage-graph",{key:{id:"code",x:"name"},label:!0,margin:{top:20}}),i.getScaleYDomain=function(t){return[0,100]},i.yAxis.tickValues([0,25,50,75,100]),i.xAxis.tickValues([2001,2003,2005,2007,2009,2011,2013,2015]),i.addMarker({value:95,label:"Nivel de rebaño",align:"left"}),d3.csv(e+"/assets/data/immunization-coverage-mcv2.csv",function(t,e){return i.setData(e.filter(function(t){return n.indexOf(t.code)!==-1}))}),t(window).resize(i.onResize)},l=function(){var n;return n=["diphteria","measles","pertussis","polio","tetanus"],d3.csv(e+"/assets/data/diseases-cases-world.csv",function(e,i){var r,a;return r=d3.max(i,function(t){return d3.max(d3.values(t),function(t){return+t})}),a=d3.max(i.filter(function(t){return["diphteria","polio","tetanus"].indexOf(t.disease)!==-1}),function(t){return d3.max(d3.values(t),function(t){return+t})}),n.forEach(function(e){var n,s;return n=i.filter(function(t){return t.disease===e}).map(function(e){return t.extend({},e)}),s=new window.LineGraph(e+"-world-graph",{isArea:!0,margin:{left:20},key:{x:"disease"}}),s.xAxis.tickValues([1980,2015]),s.yAxis.ticks(2).tickFormat(d3.format(".0s")),s.getScaleYDomain=function(){return[0,"measles"===e||"pertussis"===e?r:a]},s.setData(n),t(window).resize(s.onResize)})})},c=function(){return d3.queue().defer(d3.csv,e+"/assets/data/immunization-coverage.csv").defer(d3.csv,e+"/assets/data/countries.csv").await(function(e,r,a){var s,o,c,u,l;return s="ESP",u=["TUV","NRU","PLW","VGB","MAF","SMR","GIB","TCA","LIE","MCO","SXM","FRO","MHL","MNP","ASM","KNA","GRL","CY","BMU","AND","DMA","IMN","ATG","SYC","VIR","ABW","FSM","TON","GRD","VCT","KIR","CUW","CHI","GUM","LCA","STP","WSM","VUT","NCL","PYF","BRB"],l={MCV1:95,Pol3:80,DTP3:80},r=r.filter(function(t){return u.indexOf(t.code)===-1}),o=function(t){var e;return e={key:t.code,name:n(a,t.code,i),value:+t[2015]},t.code===s&&(e.active=!0),e},c=function(t,e){return e.value-t.value},t(".immunization-coverage-disease-graph").each(function(){var e,n,i,a,u,h;return e=t(this),n=e.data("disease"),h=e.data("vaccine"),a=r.filter(function(t){return t.vaccine===h&&""!==t[2015]}).map(o).sort(c),u=a.filter(function(t){return t.key===s}),i=new window.BarGraph(n+"-immunization-bar-graph",{aspectRatio:.25,label:!0,key:{x:"name"},margin:{top:20,bottom:0}}),i.addMarker({value:l[h],label:"Nivel de rebaño"}).setData(a),u.length>0&&e.find(".immunization-data").html("<strong>"+u[0].value+"%</strong>"),t(window).resize(function(){return i.onResize()})})})},t("#video-map-polio").length>0&&r(),t(".vaccines-disease-graph").length>0&&u(),t("#immunization-coverage-graph-all").length>0&&s(),t("#immunization-coverage-graph").length>0&&o(),t("#world-cases").length>0&&l(),t(".immunization-coverage-disease-graph").length>0)return c()}(jQuery)}.call(this);